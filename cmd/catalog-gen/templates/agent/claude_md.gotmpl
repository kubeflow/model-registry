# {{.CatalogName}}

> **Auto-generated by catalog-gen** - Regenerate with `catalog-gen generate`

This is a read-only aggregation catalog service built with the catalog-gen scaffolding tool.

## Quick Reference

| Item | Value |
|------|-------|
| Catalog Name | {{.CatalogName}} |
| Entity Type | {{.EntityName}} |
| API Port | {{.Port}} |
| Base Path | /api/{{.CatalogName}}/v1alpha1 |

## Project Structure

```
{{.CatalogName}}/
├── catalog.yaml                          # Catalog configuration (source of truth)
├── cmd/{{.CatalogName}}.go               # Entry point (editable)
├── internal/
│   ├── catalog/
│   │   ├── loader.go                     # Generic loader wrapper (generated)
│   │   └── providers/
│   │       └── *_provider.go             # Data providers (editable)
│   ├── db/
│   │   ├── models/
│   │   │   └── {{.EntityNameLower}}.go   # Entity model (generated)
│   │   └── service/
│   │       ├── {{.EntityNameLower}}.go   # Entity repository (editable)
│   │       └── spec.go                   # Datastore spec (generated)
│   └── server/openapi/
│       ├── api_*.go                      # OpenAPI handlers (generated)
│       └── api_*_service_impl.go         # Business logic (editable)
├── api/openapi/
│   └── src/openapi.yaml                  # OpenAPI spec (generated)
└── manifests/kustomize/                  # Kubernetes manifests
```

## Entity: {{.EntityName}}

The primary entity type managed by this catalog.

- **Model**: `internal/db/models/{{.EntityNameLower}}.go`
- **Repository**: `internal/db/service/{{.EntityNameLower}}.go`
- **Interface**: `models.{{.EntityName}}`
- **Repository Interface**: `models.{{.EntityName}}Repository`

### Properties

{{.EntityProps}}
{{.ArtifactsSection}}{{.ProvidersSection}}
## Common Tasks

### Adding a New Property to {{.EntityName}}

1. Edit `catalog.yaml` and add the property under `spec.entity.properties`
2. Run `catalog-gen generate` to regenerate models
3. Update `internal/db/service/{{.EntityNameLower}}.go` to map the new property
4. Update `internal/server/openapi/api_{{.EntityNameLower}}_service_impl.go` for OpenAPI conversion
5. Update `internal/catalog/providers/*.go` to parse the new property

### Running Locally

```bash
# Build the catalog
go build ./cmd/{{.CatalogName}}.go

# Run with dev config
./{{.CatalogName}} --catalogs-path=manifests/kustomize/overlays/dev/sources.yaml

# Test the API
curl http://localhost:{{.Port}}/api/{{.CatalogName}}/v1alpha1/{{.EntityNameLower}}s
```

### Regenerating Code

```bash
# Regenerate from catalog.yaml
catalog-gen generate

# Regenerate OpenAPI handlers after spec changes
make gen/openapi-server
```

## Files: Generated vs Editable

| File | Generated | Editable | Notes |
|------|:---------:|:--------:|-------|
| `catalog.yaml` | ✗ | ✓ | Source of truth for generation |
| `cmd/{{.CatalogName}}.go` | Init only | ✓ | Entry point, provider registration |
| `internal/db/models/*.go` | ✓ | ✗ | Regenerated from catalog.yaml |
| `internal/db/service/spec.go` | ✓ | ✗ | Datastore specification |
| `internal/db/service/{{.EntityNameLower}}.go` | Init only | ✓ | Repository with custom logic |
| `internal/catalog/loader.go` | ✓ | ✗ | Generic loader wrapper |
| `internal/catalog/providers/*.go` | Init only | ✓ | Provider implementations |
| `internal/server/openapi/api_*.go` | ✓ | ✗ | OpenAPI handlers |
| `internal/server/openapi/api_*_impl.go` | Init only | ✓ | Business logic |
| `api/openapi/src/*.yaml` | ✓ | ✗ | OpenAPI specification |
