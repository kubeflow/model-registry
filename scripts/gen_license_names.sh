#!/bin/bash

set -e

(
    cat <<EOF
package catalog

// File generated by gen_license_names.sh - DO NOT EDIT

var spdxToHumanReadableMap = map[string]string{
EOF
    curl -s https://raw.githubusercontent.com/spdx/license-list-data/refs/heads/main/json/licenses.json | jq -r '.licenses[] | "\"" + (.licenseId | ascii_downcase) + "\": \"" + (.name | gsub("\""; "\\\"")) + "\","'
    echo }
) >license_names.go

gofmt -w license_names.go
