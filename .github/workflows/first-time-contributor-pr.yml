name: Welcome first-time contributors (Beta2)

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  extract:
    runs-on: ubuntu-latest
    outputs:
      approvers: ${{ steps.set-approvers.outputs.approvers }}
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Install PyYAML
        run: pip3 install pyyaml

      - name: Extract approvers from OWNERS file
        id: set-approvers
        run: |
          python3 << 'EOF'
          import yaml
          import os
          
          with open('OWNERS', 'r') as f:
              data = yaml.safe_load(f)
          
          approvers = data.get('approvers', [])
          result = ' '.join([f'@{approver}' for approver in approvers])
          
          with open(os.environ['GITHUB_OUTPUT'], 'a') as f:
              f.write(f'approvers={result}\n')
          
          print(f'Extracted approvers: {result}')
          EOF
